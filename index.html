<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Garden Game</title>
  <style>
    body {
      font-family: sans-serif;
      background: #cdeccd;
      margin: 0;
      padding: 0;
    }

    h1 {
      text-align: center;
      font-size: 2rem;
      margin: 1rem 0 0.5rem;
    }

    #coinsDisplay {
      text-align: center;
      font-size: 1.2rem;
    }

    #main {
      display: flex;
      justify-content: space-between;
      padding: 1rem;
    }

    #shop, #inventory, #gearShop {
      padding: 1rem;
      border-radius: 10px;
      background: #e0ffe0;
      width: 30%;
    }

    #gearShop {
      text-align: right;
    }

    #garden {
      margin-top: 20px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }

    .plant {
      width: 50px;
      height: 50px;
      background: radial-gradient(circle, #aadfaa, #7cc67c);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      position: relative;
      transition: box-shadow 0.3s;
    }

    .flower {
      cursor: pointer;
    }

    .sunflower {
      background: radial-gradient(circle, yellow, orange);
    }

    .strawberry {
      background: radial-gradient(circle, pink, red);
    }

    .blueberry {
      background: radial-gradient(circle, lightblue, darkblue);
    }

    .fertilized {
      animation: glow 1s infinite alternate;
    }

    @keyframes glow {
      from { box-shadow: 0 0 5px 2px #ffffaa; }
      to { box-shadow: 0 0 10px 5px #ffff55; }
    }

    button {
      margin: 0.3rem;
      padding: 0.5rem 1rem;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      background-color: #77cc77;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #66bb66;
    }

    .tooltip {
      position: absolute;
      bottom: 60px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #444;
      color: #fff;
      padding: 4px 8px;
      border-radius: 5px;
      font-size: 12px;
      white-space: nowrap;
      display: none;
    }

    .plant:hover .tooltip {
      display: block;
    }
  </style>
</head>
<body>
  <h1>ðŸŒ» My Garden Game</h1>
  <div id="coinsDisplay">Coins: <span id="coins">100</span></div>

  <div id="main">
    <!-- Left: Seed Shop -->
    <div id="shop">
      <h2>Seed Shop</h2>
      <button onclick="buySeed('sunflower')">Buy Sunflower Seed (10 coins)</button><br>
      <button onclick="buySeed('strawberry')">Buy Strawberry Seed (50 coins)</button><br>
      <button onclick="buySeed('blueberry')">Buy Blueberry Seed (400 coins)</button>
    </div>

    <!-- Middle: Inventory -->
    <div id="inventory">
      <h2>Inventory</h2>
      <p>Sunflower Seeds: <span id="sunflowerCount">0</span></p>
      <p>Strawberry Seeds: <span id="strawberryCount">0</span></p>
      <p>Blueberry Seeds: <span id="blueberryCount">0</span></p>
      <p>Fertilizer: <span id="fertilizerCount">0</span></p>
      <p>Watering Can: <span id="wateringCount">0</span></p>
      <button onclick="plantSeed('sunflower')">Plant Sunflower ðŸŒ±</button>
      <button onclick="plantSeed('strawberry')">Plant Strawberry ðŸŒ±</button>
      <button onclick="plantSeed('blueberry')">Plant Blueberry ðŸŒ±</button>
      <br><br>
      <button onclick="startFertilizerMode()">Use Fertilizer</button>
      <button onclick="startWateringMode()">Use Watering Can</button>
    </div>

    <!-- Right: Gear Shop -->
    <div id="gearShop">
      <h2>Gear Shop</h2>
      <button onclick="buyFertilizer()">Buy Fertilizer (50 coins)</button><br>
      <button onclick="buyWateringCan()">Buy Watering Can (150 coins)</button>
    </div>
  </div>

  <h2 style="text-align:center">Garden</h2>
  <div id="garden"></div>

  <script>
    let coins = 100;
    let fertilizerMode = false;
    let wateringMode = false;

    let inventory = {
      sunflower: 0,
      strawberry: 0,
      blueberry: 0,
      fertilizer: 0,
      wateringCan: 0
    };

    const plantData = {
      sunflower: {
        cost: 10,
        growTime: 25000,
        emoji: "ðŸŒ»",
        class: "sunflower",
        sellPrice: 15,
        regrows: false
      },
      strawberry: {
        cost: 50,
        growTime: 60000,
        emoji: "ðŸ“",
        class: "strawberry",
        sellPrice: 20,
        regrows: true
      },
      blueberry: {
        cost: 400,
        growTime: 120000,
        emoji: "ðŸ«",
        class: "blueberry",
        sellPrice: 75,
        regrows: true
      }
    };

    function updateUI() {
      document.getElementById('coins').textContent = coins;
      document.getElementById('sunflowerCount').textContent = inventory.sunflower;
      document.getElementById('strawberryCount').textContent = inventory.strawberry;
      document.getElementById('blueberryCount').textContent = inventory.blueberry;
      document.getElementById('fertilizerCount').textContent = inventory.fertilizer;
      document.getElementById('wateringCount').textContent = inventory.wateringCan;
    }

    function buySeed(type) {
      const plant = plantData[type];
      if (coins >= plant.cost) {
        coins -= plant.cost;
        inventory[type]++;
        updateUI();
      } else {
        alert("Not enough coins!");
      }
    }

    function buyFertilizer() {
      if (coins >= 50) {
        coins -= 50;
        inventory.fertilizer++;
        updateUI();
      } else {
        alert("Not enough coins!");
      }
    }

    function buyWateringCan() {
      if (coins >= 150) {
        coins -= 150;
        inventory.wateringCan++;
        updateUI();
      } else {
        alert("Not enough coins!");
      }
    }

    function startFertilizerMode() {
      if (inventory.fertilizer <= 0) {
        alert("You don't have any fertilizer!");
        return;
      }
      fertilizerMode = true;
      alert("Fertilizer mode ON! Click a growing plant to apply.");
    }

    function startWateringMode() {
      if (inventory.wateringCan <= 0) {
        alert("You don't have any watering cans!");
        return;
      }
      wateringMode = true;
      alert("Watering Can mode ON! Click a growing plant to finish instantly.");
    }

    function plantSeed(type) {
      if (inventory[type] > 0) {
        inventory[type]--;
        const data = plantData[type];

        const plant = document.createElement("div");
        plant.classList.add("plant");
        plant.textContent = "ðŸŒ±";

        const tooltip = document.createElement("div");
        tooltip.className = "tooltip";
        tooltip.textContent = "Growing...";
        plant.appendChild(tooltip);

        document.getElementById("garden").appendChild(plant);

        let growDuration = data.growTime;
        let fertilized = false;
        let plantedAt = Date.now();
        let readyAt = plantedAt + growDuration;

        const updateTooltip = () => {
          const remaining = Math.max(0, Math.floor((readyAt - Date.now()) / 1000));
          tooltip.textContent = remaining > 0 ? `${remaining}s remaining` : "Ready to harvest!";
        };

        const interval = setInterval(updateTooltip, 500);

        plant.onclick = () => {
          const now = Date.now();

          if (fertilizerMode && !fertilized && plant.textContent === "ðŸŒ±") {
            const remaining = readyAt - now;
            readyAt = now + remaining / 2;
            fertilized = true;
            plant.classList.add("fertilized");
            inventory.fertilizer--;
            fertilizerMode = false;
            updateUI();
            return;
          }

          if (wateringMode && plant.textContent === "ðŸŒ±") {
            readyAt = now;
            inventory.wateringCan--;
            wateringMode = false;
            updateUI();
            return;
          }

          if (plant.classList.contains("flower")) {
            coins += data.sellPrice;
            updateUI();
            if (data.regrows) {
              plant.textContent = "ðŸŒ±";
              plant.classList.remove(data.class, "flower", "fertilized");
              growAgain();
            } else {
              clearInterval(interval);
              plant.remove();
            }
          }
        };

        function growAgain() {
          plantedAt = Date.now();
          readyAt = plantedAt + growDuration;
          fertilized = false;

          const regrowInterval = setInterval(() => {
            const remaining = Math.max(0, Math.floor((readyAt - Date.now()) / 1000));
            tooltip.textContent = remaining > 0 ? `${remaining}s remaining` : "Ready to harvest!";
          }, 500);

          setTimeout(() => {
            plant.textContent = data.emoji;
            plant.classList.add("flower", data.class);
            clearInterval(regrowInterval);
          }, growDuration);
        }

        setTimeout(() => {
          plant.textContent = data.emoji;
          plant.classList.add("flower", data.class);
          clearInterval(interval);
        }, growDuration);

        updateUI();
      } else {
        alert("No seeds!");
      }
    }

    updateUI();
  </script>
</body>
</html>
